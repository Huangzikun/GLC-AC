## 7-1 Little Gyro's Winter Homework

关键词：打表、找规律

思路：按照如下方式打表，然后找规律，k取到100左右规律就比较明显了。设第i行最左边的元素到最右边的元素（共四个元素）依次为$a_{i_0}、a_{i_1}、a_{i_2}、a_{i_3}$。显然有$a_{i_1} = a_{i_0} * 2、a_{i_2} = a_{i_0} * 2、a_{i_3} = a_{i_0} * 4$（规律1）；并且对于任意$i$，满足$i > 4$时，有$a_{i_0} = a_{{f(i)}_0}$，其中$f(i) = i / 4$ （规律2）。

所以，对于任意给定的k，满足$k > 4$，先计算其行号$w$，满足$w = (k + 3) / 4$，再计算其相对于$a_{w_0}$的偏移量t，满足$t = (k +3) - w * 4$。

利用规律1，则有$a_{w_t} = a_{w_0} * dgt[t]$，其中，$dgt[i]$表示“偏移量为i时的乘积因子”。显然，我们有$dgt[4] = \{1,2,2,4\}$。再利用规律2，则有$a_{w_0} = a_{f(w)_0}$。综上，我们有$a_{w_t} = a_{f(w)_0} * dgt[t] $。反复使用上述结论，直到k满足$k <= 4$，此时可以直接求得答案。

设$ist[i]表示k=i时对应的答案$，显然我们有$ist[4] = \{1,2,2,4\}$，于是此时答案即为$ist[k] * \prod_{i = 1}^{n} dgt[t_i]$，其中，n代表$从a_{w_t}到k的迭代次数$（一次迭代即为一次转移$a_{w_t}->a_{w_0}$）。这个过程可以简单地使用递归实现，代码见下文。

```c++
打表数据：
1 2 2 4 
2 4 4 8 
2 4 4 8 
4 8 8 16 
2 4 4 8 
4 8 8 16 
4 8 8 16 
8 16 16 32 
2 4 4 8 
4 8 8 16 
4 8 8 16 
8 16 16 32 
4 8 8 16 
8 16 16 32 
8 16 16 32 
16 32 32 64 
```

